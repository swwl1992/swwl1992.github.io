<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width">
		<title>Differences between type systems of Ocaml & Java</title>
		<link href="/css/main.css" type="text/css" rel="stylesheet">
		<link href="/css/syntax.css" type="text/css" rel="stylesheet">
		<link href="/css/materialize.min.css" type="text/css" rel="stylesheet">
		<link href="/img/favicon.ico" rel="icon">
        <script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
	</head>
	<body>		
		<nav class="teal lighten-2">
			<div class="nav-wrapper">
				<div class="container">
                    <a href="/" class="brand-logo hide-on-med-and-down">Salmon Blog</a>
					<ul id="nav" class="right">
						<li><a href="/">Home</a></li>
						<li><a href="http://apps.wanwenli.com">Salmon Apps</a></li>
						<li><a href="/categories.html">Categories</a></li>
					</ul>
				</div>
			</div>
		</nav>
		<div class="container">
            <div class="section">
                <div class="row">
                    <div class="col l9 s12">
                        <div class="content"><h3>Differences between type systems of Ocaml & Java</h3>
<b>27 Dec 2013</b>
<div id="article">
<h5 id="introduction">Introduction</h5>

<p>When asked the differences between the Ocaml’s type system and Java’s,
I realized that I did not understand them well.
Therefore, I did some research about these two type systems and
posted the result as this blog.</p>

<h5 id="ocaml-type-system">Ocaml Type System</h5>

<p>The ML languages are statically and strictly typed.
In addition, every expression has exactly one type.
In contrast, C is a weakly-typed language:
values of one type can usually coerced to a value of any other type,
whether the coercion makes sense or not.</p>

<p>What is “safety”?
There is a formal definition based on the operational semantics of
the programming language,
but an approximte definition is that a valid program will never fault
because of an invalid machine operation.
All memory access will be valid.
ML guarantees safety by proving that every program that
passes the type checker can never produce a machine fault.
Another functional language,
Lisp which is dynamically and strictly typed,
guarantees its safety by checking for validity at run time.
One of the consequences is that ML has no <code class="highlighter-rouge">nil</code> or <code class="highlighter-rouge">NULL</code> values.
These values would potentially cause mechine errors if used
where a value is expected.</p>

<p>An Ocaml programmer may initially spend a lot of time getting the Ocaml
type checker to accept his programs.
But eventually
he will find the type checker is one of his best friends.
It helps a programmer figure out
where errors may be lurking in programs.
If a change is made, the type checker will track down the parts that
are affected.
At the meantime,
here are some rules about type checking.</p>

<ul>
  <li>Every expression has exactly one type.</li>
  <li>When an expression is evaluated, one of the four things may happen:
    <ul>
      <li>it may evaluate to a value of the same type as the expression,</li>
      <li>it may raise an exception,</li>
      <li>it may not terminate,</li>
      <li>it may exit.</li>
    </ul>
  </li>
</ul>

<p>One of the important points in Ocaml is that
there are no “pure commands”.
Every assignment produce a value</p>
<ul>
  <li>although the value has the trivial <code class="highlighter-rouge">unit</code> type.
Below let us see some examples of how Ocaml type system works:</li>
</ul>

<figure class="highlight"><pre><code class="language-ocaml" data-lang="ocaml"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre>	<span class="k">if</span> <span class="mi">1</span> <span class="p">&lt;</span> <span class="mi">2</span> <span class="k">then</span>
		<span class="mi">1</span>
	<span class="k">else</span>
		<span class="mi">1</span><span class="p">.</span><span class="mi">3</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>When compiling the code,
the compilor would tell you there is a type error on line 4,
characters 3-6. This is because the type checker requires that
both branches of the conditional statement have the same type
no matter how the test turns out.
Since the expressions <code class="highlighter-rouge">1</code> and <code class="highlighter-rouge">1.3</code> have different types,
the type checker generates an error.</p>

<h5 id="a-strong-static-language-java">A Strong Static Language: Java</h5>
<p>Java is considered one of the most static languages,
but it implemented a comprehensive reflection API which
allows you to change classes at run time,
thus resembling more dynamic languages.
This feature enables Java Virtue Machine (JVM)
to support very dynamic languages such as Groovy.</p>

<p>Java needs everything to be defined so that
you know all the time what type of object you have and
whether you call them properly.
In addition,
Java does not allow code outside of a class.
It has been a major reason why people complain that
Java forces you to write too much boilerplate.</p>

<p>The popularity of Java and its strong adherence to strong typing
made a huge impact on the programming landscape.
Strong typing advocates lauded Java for fixing the cracks in C++.
But many programmers found Java overly prescriptive and rigid.
They wanted a fast way to write code without all of the extra definition of Java.
As a result, strong dynamic typing languages,
such as JavaScript, Python and Ruby, are becoming more and more popular
in recent years.</p>

<h5 id="what-are-their-differences">What are their differences?</h5>
<p>Anyway,
there is no stronger or weaker type system between these two systems.
Ocaml and Java are both to static and strong typing languages.
They both have primitive, array and class types.
(The standard ML language does not support class types but 
Objective-caml does.)
However Java and Ocaml do have some differences in their type systems.
Ocaml is a functional language and
a function can be passed as a argument,
known as higher order functions.
The type of a function is defined by both its input and output type.
For example in the chunck of code below,</p>

<figure class="highlight"><pre><code class="language-ocaml" data-lang="ocaml"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>	<span class="k">let</span> <span class="n">square</span> <span class="n">x</span> <span class="p">=</span> <span class="n">x</span> <span class="p">*</span> <span class="n">x</span><span class="p">;</span>
	<span class="k">val</span> <span class="n">square</span> <span class="p">:</span> <span class="kt">int</span> <span class="p">-&gt;</span> <span class="kt">int</span> <span class="p">=</span> <span class="p">&lt;</span><span class="k">fun</span><span class="p">&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><code class="highlighter-rouge">square</code> is a function that takes an integer and returns an integer.
Most importantly,
square can be passed to another function as an input.
However it is not done as natural in Java.
In Java higher order function is usually done by
wrapping the function within an interface as below:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre>  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">methodToPass</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">// do something</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">dansMethod</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="n">Callable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">myFunc</span><span class="o">)</span> <span class="o">{</span>
		<span class="c1">// do something</span>
	<span class="o">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>then use a inner class to call the method <code class="highlighter-rouge">methodToPass</code> as shown below:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre>  <span class="n">dansMethod</span><span class="o">(</span><span class="mi">100</span><span class="o">,</span> <span class="k">new</span> <span class="n">Callable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;()</span> <span class="o">{</span>
		<span class="kd">public</span> <span class="n">Integer</span> <span class="nf">call</span><span class="o">()</span> <span class="o">{</span>
			<span class="k">return</span> <span class="nf">methodToPass</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">});</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Next, pattern matching is something unique to Ocaml compared to Java.
A similar feature in Java is perhaps <code class="highlighter-rouge">switch</code> statement.
However it does not have many things to do with type system.</p>

<figure class="highlight"><pre><code class="language-ocaml" data-lang="ocaml"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre>	<span class="k">let</span> <span class="k">rec</span> <span class="n">sigma</span> <span class="n">f</span> <span class="p">=</span> <span class="k">function</span>
		<span class="p">|</span> <span class="bp">[]</span> <span class="p">-&gt;</span> <span class="mi">0</span>
		<span class="p">|</span> <span class="n">x</span> <span class="p">::</span> <span class="n">l</span> <span class="p">-&gt;</span> <span class="n">f</span> <span class="n">x</span> <span class="o">+</span> <span class="n">sigma</span> <span class="n">f</span> <span class="n">l</span><span class="p">;;</span>
	<span class="k">val</span> <span class="n">sigma</span> <span class="p">:</span> <span class="p">(</span><span class="k">'</span><span class="n">a</span> <span class="p">-&gt;</span> <span class="kt">int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="k">'</span><span class="n">a</span> <span class="kt">list</span> <span class="p">-&gt;</span> <span class="kt">int</span> <span class="p">=</span> <span class="p">&lt;</span><span class="k">fun</span><span class="p">&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Last but not the least,
type inference is a major difference between Ocaml and Java type systems.
Most conventional static typing languages require programmers to restate the types of expressions.
For example,
the following Java code instantiates a method to increment an integer by 1.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="kt">int</span> <span class="nf">succ</span> <span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
<span class="o">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>In OCaml, all programs can be written such that the types they use are competely inferred, i.e.
it is never necessary to explicitly define and declare types in OCaml.
However, defining important types in a program is a good way to leverage static type checking by providing machine-checked documentation,
improving error reporting and tightening the type system to catch more errors.</p>

<p>The above Java code can be re-written as</p>

<figure class="highlight"><pre><code class="language-ocaml" data-lang="ocaml"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="k">let</span> <span class="n">succ</span> <span class="n">n</span> <span class="p">=</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;;</span>
<span class="k">val</span> <span class="n">succ</span> <span class="p">:</span> <span class="kt">int</span> <span class="p">-&gt;</span> <span class="kt">int</span> <span class="p">=</span> <span class="p">&lt;</span><span class="k">fun</span><span class="p">&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>OCaml infers that the function maps integers onto integers even though no types were declared.
The inference was based upon the use of the integer operator + and the integer literal 1.</p>

<h5 id="conclusion">Conclusion</h5>

<p>In summary,
the type system of Java has lots of similarities compared to Ocaml.
Still Java is one of the dominant and most popular programming languages.</p>

</div>
<div id="disqus_thread"></div>
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = 'wanwenli'; // required: replace example with your forum shortname

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
                    </div>
                    <div class="col l3 s12">
                        <h4 class="grey-text text-darken-4">Links</h4>
                        <ul>
                            <li><a href="http://chenyuio.com">Chen Yu I/O</a></li>
                            <li><a href="http://www.bicrement.com/">Zhuochun bicrement</a></li>
                            <li><a href="http://guanyilun.wordpress.com/author/guanyilun/">Yi Lun's Backyard</a></li>
                            <li><a href="http://flyfy1.github.io">Songyy's Thoughts</a></li>
                            <li><a href="http://qiang.hu">A Hu Qiang Blog</a></li>
                            <li><a href="http://joshuatj.com">JOSHUA.NG; I.AM.</a></li>
                            <li><a href="http://onethingihaveasked.wordpress.com/">One thing I have asked</a></li>
                        </ul>
                    </div>
                </div>
            </div>
		</div>				
		<footer class="page-footer teal lighten-2">
			<div class="container">
                <div class="row">
                    <div class="col l9 s12">
                        <h5 class="white-text">About</h5>
                        <p class="grey-text text-lighten-4">Simon is a software engineer who uses Java, Python and JavaScript.</p>
                    </div>
                    <div class="col l3 s12">
                        <h5 class="white-text">Connect</h5>
                            <iframe src="https://ghbtns.com/github-btn.html?user=swwl1992&type=follow&count=true" frameborder="0" scrolling="0" width="170px" height="20px"></iframe>
                            <script type="IN/MemberProfile" data-id="https://www.linkedin.com/pub/simon-wan-wenli/25/952/b81" data-format="hover" data-text="Simon Wan Wenli"></script>
                    </div>
                </div>
			</div>
            <div class="footer-copyright">
			    <div class="container"> <p>Copyright &copy; <b>Simon Wan Wenli</b>
                    &nbsp;2017
                    &nbsp;| Design from <a class="grey-text text-lighten-3" href="http://materializecss.com/"><b>Materialize</b></a></p>
                </div>
            </div>
		</footer>
		<script type="text/javascript" src="/js/jquery-2.1.1.min.js"></script>
		<script type="text/javascript" src="/js/materialize.min.js"></script>
	</body>
</html>
